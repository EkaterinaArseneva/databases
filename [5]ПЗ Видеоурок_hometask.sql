use vk;

-- 1. ????? ? ??????? users ???? created_at ? updated_at ????????? ??????????????. 
-- ????????? ?? ???????? ????? ? ????????.
-- ?? ??????? ?? ???????, ?.?. ? ?????? ? ???? ????? ?? ????.
alter table users add (
	created_at datetime default null,
	updated_at datetime default null)
;

	
update users
	set 
	created_at = now(),
	updated_at = now()
;

-- 2. ??????? users ???? ???????? ??????????????. ?????? created_at ? updated_at ???? ?????? ????? VARCHAR
-- ? ? ??? ?????? ????? ?????????? ???????? ? ??????? "20.10.2017 8:10". 
-- ?????????? ????????????? ???? ? ???? DATETIME, ???????? ???????? ????? ????????.

-- ??????? ??????? ? ???????????? ????? varchar ? ???????? ??

alter table users add (
	created_at_varchar varchar(100) default '2017.10.20 8:10', 
	updated_at_varchar varchar(100) default '2020.01.24 8:12'
);

-- ?????? ??????????? ?????? ? ???.
update users
	set 
	created_at_varchar = convert(created_at_varchar, datetime),
	updated_at_varchar = convert(created_at_varchar, datetime)
;
-- ????? ?????????????? ???? ???????????? ?????? ???? ?? ????????????? ??? ?????? ???????.
ALTER TABLE users change created_at_varchar created_at_datetime DATETIME;
ALTER TABLE users change updated_at_varchar updated_at_datetime DATETIME;

-- 3.? ??????? ????????? ??????? storehouses_products ? ???? value ????? ??????????? 
-- ????? ?????? ?????: 0, ???? ????? ?????????? ? ???? ????, ???? ?? ?????? ??????? ??????. 
-- ?????????? ????????????? ?????? ????? ???????, ????? ??? ?????????? ? ??????? ?????????? ???????? value. 
-- ??????, ??????? ?????? ?????? ?????????? ? ?????, ????? ???? ???????.

create database warehouse;
use warehouse;
create table products (
	id serial primary key,
	`values` bigint unsigned not null
);

insert into products (`values`) values
('2'),
('0'),
('0'),
('4'),
('6'),
('10')
;

-- ?????
(select * from products 
where `values` > 0
order by `values` desc)
union
(select * from products 
where `values` = 0);
